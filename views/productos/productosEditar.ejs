<%-include("../partials/head.ejs") %>
    <%-include("../partials/headerAdm.ejs") %>


        <div>
            <h2>Formulario de Editar Productos</h2>
            <form action="/productos/update/<%= id %>?_method=PUT" class="row" method="post" id="formCreate" enctype="multipart/form-data">
                <div class="subPadre">
                    <div>
                        <label for="nombre" class="form-label">Nombre::</label>
                        <input type="text" id="nombre" name="name" value="<%= name %>">
                    </div>
                    <div>
                        <label for="precio" class="form-label" >Precio:</label>
                        <input type="number" id="precio" name="price" value="<%= price %>">
                    </div>
                    <div>
                        <label for="cantidad" class="form-label" >Cantidad:</label>
                        <input type="number" id="cantidad" name="pieces" value="<%= pieces %>">
                    </div>
                    <div>
                        <label for="descuento" class="form-label">Descuento:</label>
                        <input type="number" id="cantidad" name="discount">
                    </div>
                    <div>
                        <label for="descripcion" class="form-label">Descripción:</label>
                        <textarea id="descripcion" name="description"><%= description %></textarea>
                    </div>
                    <div>
                        <label for="category" class="categoria">Categoría:</label>
                        <select name="categoryId">
                            <% categories.forEach(category=> { %>
                                <option value="<%= category.id %>" <%= category.id == categoryId && 'selected' %>>
                                    <%= category.name %>
                                </option>
                                <% }) %>
                        </select>
                    </div>
                    <div>
                        <label for="category" class="categoria">Sección:</label>
                        <select name="sectionId">
                            <% sections.forEach(section=> { %>
                                <option value="<%= section.id %>"  <%= section.id == sectionId && 'selected' %>>
                                    <%= section.name %>
                                </option>
                                <% }) %>
                        </select>
                    </div>
                    <div>
                        <div>
                            <% ingredientsDB.forEach(ingredient => { %>
                                <label for="<%= ingredient.name + ingredient.id %>">
                                    <input 
                                        type="checkbox" 
                                        name="ingredients" 
                                        id="<%= ingredient.name + ingredient.id %>" 
                                        value="<%= ingredient.id %>"
                                        <%=  ingredients.some(i => i.id == ingredient.id) && 'checked' %>
                                    ><%= ingredient.name %>
                                </label>
                            <% }) %>
                        </div>
                    </div>
                    <div>
                        <label for="file">Imagen:</label>
                        <input type="file" name="image" id="avatar" accept="images/*">
                    </div>
                    <div class="cajaButton">
                        <div>
                            <button type="submit" class="bCrear">Guardar</button>

                        </div>
                    </div>
            </form>
            <script type="module" src="/javascripts/productsValidationJS.js"></script>
        </div>


        <%-include("../partials/footer.ejs") %>